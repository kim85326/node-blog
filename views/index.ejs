<% extend("./layouts/layout.ejs") %>

<div class="row my-4 justify-content-center">
    <div class="col-md-9">
        <% for (key in articles) { %>
        <div class="card mb-3">
            <div class="card-body">
                <a href="/post/<%- articles[key].id %>">
                    <h2 class="text-primary">
                        <%- articles[key].title %>
                    </h2>
                </a>
                <div class="d-flex flex-row text-secondary small">
                    <div class="p-2">
                        <span class="fa fa-clock-o"></span> <%-
                        moment(articles[key].updateTime *
                        1000).format("YYYY-MM-DD") %>
                    </div>
                    <div class="p-2">
                        <i class="fa fa-tag" aria-hidden="true"></i>
                        <a href="#" class="text-info">
                            <% if
                            (categories.hasOwnProperty(articles[key].category))
                            { %> <%- categories[articles[key].category].name %>
                            <% } else { %> 沒有分類 <% } %>
                        </a>
                    </div>
                </div>
                <div>
                    <%- striptags(articles[key].title).slice(0, 150) %>
                </div>
            </div>
        </div>
        <% } %>
    </div>
</div>

<nav class="my-5" aria-label="Page navigation example">
    <ul class="pagination justify-content-center">
        <li class="page-item <% if(!hasPreviousPage) { %> disabled <% } %>">
            <a
                class="page-link"
                href="/?page=<%- parseInt(currentPage) - 1 %>"
                tabindex="-1"
            >
                Previous
            </a>
        </li>
        <% for (var i = 1; i < totalPages + 1; i++) { %>
        <li class="page-item <% if(i == currentPage) { %> active <% } %>">
            <a class="page-link" href="/?page=<%- i %>">
                <%- i %>
            </a>
        </li>
        <% } %>
        <li class="page-item <% if(!hasNextPage) { %> disabled <% } %>">
            <a
                class="page-link"
                href="/?page=<%-  parseInt(currentPage) + 1 %>"
            >
                Next
            </a>
        </li>
    </ul>
</nav>
